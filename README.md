# Code Challenge
# B. Execute Functional Tests – ETC (1h)

Based on the test cases designed in the previous step, select two different desktop browsers and one mobile browser to execute them. Register the results of your tests and create a template to report bugs (if found).

How execute all test cases using desktop browser, and one mobile browser

```bash
npm run uistest:all
```

we can execute one by one using according each user story

User Story #1 desktop chrome execution
```bash
npm run uistest:web:chrome
```

User Story #2 desktop firefox execution
```bash
npm run uistest:web:firefox
```

User Story #3 mobile chrome execution
```bash
npm run uitest:mobile:chrome
```
# C. Automation Challenge – ETC (2h)

## Instructions
1. DONE - Create a public git repository for your project and push the initial setup of the project.
2. DONE - Create a branch with name “userStory01” out of master to start working on the US #1.
3. DONE - Use ONLY ONE test file to place all test there (like a smoke test).
4. DONE - Once completed US#1 make sure all code is pushed to the remote repository.
   ```txt
   clarification:
   using DEV as main branch
   create PR from userStory01 to dev
   complete PR
   ```
5. DONE - Create a branch with name “userStory02” out of userStory01 to start working on the US #2, remember to continue working in the same file as mentioned in step 3.
```txt
   clarification:
   using DEV as main branch
   create PR from userStory02 to dev
   open PR
   ```
6. DONE - Do a PR to master from userStory02.

Deliverables:
1. DONE - Test cases generated in phase A.
2. DONE - Test results from phase B.
3. Bugs report and documentation from phaseB.
```txt
clarification:
I created a bug report in the root 
bug-report\durationfield.md
all details was created there
```
4. Link to the git repository of automation project(remember to add a ReadMe file
with detailed instructions about how to run your tests).
5. Test results report from automation.
6. Video of your test execution running.
https://www.loom.com/share/bf53f57332364ab8b53b2f836799f7bc?sid=5fb8ba7a-a6c1-4045-9ae1-9f743efb2c7b

---

# Playwright Test Automation

This project uses Playwright for automated testing. This README provides guidelines for installation, test execution, and viewing reports.

## Table of Contents
- [Precondition](#precondition)
- [Installation](#installation)
- [Running Tests](#running-tests)
- [Viewing Reports](#viewing-reports)
  - [Allure Report](#allure-report)
  - [HTML Report](#html-report)
  - [Viewing Trace Files](#viewing-trace-files)

## Precondition

- **Node.js and npm** must be installed on your machine. You can download and install them from the [Node.js official website](https://nodejs.org/).


## Installation

1. **Clone the repository**:
   ```bash
   git clone https://github.com/marcelogaray/playwrighttypescript.git
   cd playwrighttypescript
   ```

2. **Install dependencies**:
   ```bash
   npm install
   ```

## Running Tests

There are several ways to run the tests defined in this project:

1. **Run all tests**:
   
   ```bash
   npm run runtest
   ```

To see the execution
   ```bash
   npm run uitest
   ```

2. **Run smoke tests** (tests tagged with `@smoke`):
   ```bash
   npm run test:smoke
   ```

3. **Run regression tests** (tests tagged with `@regression`):
   ```bash
   npm run test:regression
   ```

4. **Run tests with HTML report**:
   ```bash
   npm run test:report
   ```

5. **Run all tests and generate reports**:
   ```bash
   npm run test:reports
   ```

## Viewing Reports

### Allure Report

1. **Generate Allure Report**: After running your tests, use the following command to generate the Allure report:
   ```bash
   npm run allure:generate
   ```

2. **Open Allure Report**:
   ```bash
   npm run allure:serve
   ```

This command will open the Allure report in your default web browser.

### HTML Report

To view the default HTML report generated by Playwright, use the following command:

```bash
npm run pw:report
```

### Viewing Trace Files

If you have trace files generated from your tests, you can view them using the following command:

```bash
npx playwright show-trace path/to/trace.zip
```

Replace `path/to/trace.zip` with the actual path to your trace file.

---

# docker
get ip from docker
 
```bash
docker ps
```

## Diagnosing and Resolving Container Restart Issues

The error indicates that your container is stuck in a **restart** loop. This usually happens due to configuration errors or because a service in the container cannot start correctly.

### **Step 1: Check the Container Logs**
Run the following command to view the logs and understand why the container keeps restarting:

```bash
docker logs playwrighttypescript_playwright_1 --follow
```

Look for errors related to missing dependencies, permissions, or configuration issues in your project.

---

### **Step 2: Verify Dockerfile Configuration**
Ensure that all dependencies are correctly installed. If you see errors in the logs related to missing dependencies or binaries, check the Dockerfile configuration.

For example, if Playwright browsers are missing, verify if you installed them with:

```dockerfile
RUN npx playwright install
```

If they are not installed correctly, add it to your Dockerfile.

---

### **Step 3: Manually Test Inside the Container (Shell Access)**
If the container keeps restarting, disable automatic restarts for debugging:

1. **Stop the container:**
   ```bash
   docker-compose down
   ```

2. **Start the container in interactive mode for diagnostics:**
   ```bash
   docker run -it --entrypoint /bin/bash playwrighttypescript_playwright
   ```

3. **Inside the container, try running the commands manually:**
   ```bash
   allure --version
   npx playwright --version
   npm run test:newrepo
   ```

This will allow you to see what fails without the container automatically restarting.

---

### **Step 4: Review the docker-compose.yml**
Ensure that you have the restart option configured correctly to avoid infinite restart loops:

```yaml
playwright:
  restart: "on-failure"
```

If you have it set to `always`, it could be causing the continuous restart.

---

### **Step 5: Check Permissions and Dependencies**
If the installation of Allure keeps failing:

- Check if Allure was installed correctly with NPM.
- If not, try adding the following to your Dockerfile:

```dockerfile
RUN npm install -g allure-commandline --save-dev
```

---

### **Step 6: Remove Containers and Rebuild**
After making changes, ensure to rebuild everything from scratch:

```bash
docker-compose down --remove-orphans
docker-compose build --no-cache
docker-compose up -d

```

---




To find the IP address of your running Docker service and access the Allure report, you can follow these steps:

### 1. Finding the IP Address of Your Docker Container
You can find the IP address of a running container using the following command:

```bash
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' <container_name_or_id>
```
Replace <container_name_or_id> with the name or ID of your Docker container. If you are using Docker Compose, the name of the container will typically be in the format project_service_1, where project is the name of your Docker Compose project and service is the name of the service defined in your docker-compose.yml.

Example:

```bash
docker inspect -f '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}' playwrighttypescript_playwright_1
```
### 2. Accessing the Allure Report
If you followed the standard configuration for Allure in your Docker setup, you would typically expose the Allure report on a specific port. Check your docker-compose.yml file to see which port is mapped for the Allure service. It might look something like this:


## VSCode Install plugins: Markdown Preview Enhanced
Name: Markdown Preview Enhanced
Id: shd101wyy.markdown-preview-enhanced
Description: Markdown Preview Enhanced ported to vscode
Version: 0.8.11
Publisher: Yiyi Wang
VS Marketplace Link: https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced## VSCode Install plugins: Markdown Preview Enhanced
Name: Markdown Preview Enhanced
Id: shd101wyy.markdown-preview-enhanced
Description: Markdown Preview Enhanced ported to vscode
Version: 0.8.11
Publisher: Yiyi Wang
VS Marketplace Link: https://marketplace.visualstudio.com/items?itemName=shd101wyy.markdown-preview-enhanced

## Conclusion

This README provides a comprehensive overview of how to set up, run, and view reports for your Playwright tests. Ensure that your environment is correctly configured to avoid any issues during test execution.
